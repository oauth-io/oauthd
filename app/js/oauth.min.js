(function(){"use strict";function t(e,t){function n(r){var i;try{i=JSON.parse(r.data)}catch(s){}if(!i||!i.provider||i.provider.toLowerCase()!==e)return;if(window.removeEventListener)window.removeEventListener("message",n,false);else if(window.detachEvent)window.detachEvent("onmessage",n);else if(document.detachEvent)document.detachEvent("onmessage",n);t(null,i)}setTimeout(function(){t(new Error("Authorization timed out"));t=function(){}},600*1e3);return n}var e={oauthd_url:"{{auth_url}}"};window.OAuth={initialize:function(t){e.key=t},popup:function(n,r){var i=e.oauthd_url+"/"+n+"?k="+e.key;var s={width:Math.floor(window.outerWidth*.8),height:Math.floor(window.outerHeight*.5)};if(s.height<350)s.height=350;if(s.width<800)s.width=800;s.left=window.screenX+(window.outerWidth-s.width)/2;s.top=window.screenY+(window.outerHeight-s.height)/8;var o="width="+s.width+",height="+s.height;o+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0";o+=",left="+s.left+",top="+s.top;if(window.attachEvent)window.attachEvent("onmessage",t(n,r));else if(document.attachEvent)document.attachEvent("onmessage",t(n,r));else if(window.addEventListener)window.addEventListener("message",t(n,r),false);var u=window.open(i,"Authorization",o);if(u)u.focus()},redirect:function(t,n){n=e.oauthd_url+"/"+t+"?k="+e.key+"&redirect_uri="+n;document.location.href=n}}})()